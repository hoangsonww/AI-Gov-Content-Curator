#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

# Exactly the same pipeline as pre-commit

printf "\nâ†’ Running backend tests...\n"
(cd backend && npm test) || { echo "ğŸš« backend tests failed"; exit 1; }

printf "\nâ†’ Running crawler tests...\n"
(cd crawler && npm test) || { echo "ğŸš« crawler tests failed"; exit 1; }

printf "\nâ†’ Running newsletters tests...\n"
(cd newsletters && npm test) || { echo "ğŸš« newsletters tests failed"; exit 1; }

printf "\nâ†’ Running frontend tests (failures OK)...\n"
(cd frontend && npm test) || echo "âš ï¸ frontend tests failed (ignored)"

echo "\nâœ… All required tests passed. Pushing..."
